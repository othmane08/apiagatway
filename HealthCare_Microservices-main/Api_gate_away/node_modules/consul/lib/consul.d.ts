import { Agent as httpAgent } from "http";
import { Agent as httpsAgent } from "https";
import { Acl } from "consul/lib/acl";
import { Agent } from "consul/lib/agent";
import { Catalog } from "consul/lib/catalog";
import { Event } from "consul/lib/event";
import { Health } from "consul/lib/health";
import { Kv } from "consul/lib/kv";
import { Query } from "consul/lib/query";
import { Session } from "consul/lib/session";
import { Status } from "consul/lib/status";
import { Transaction } from "consul/lib/transaction";
import { Watch, WatchOptions } from "consul/lib/watch";

export interface CommonOptions {
  token?: string;
}

interface DefaultOptions extends CommonOptions {
  dc?: string;
  partition?: string;
  wan?: boolean;
  consistent?: boolean;
  stale?: boolean;
  index?: string;
  wait?: string;
  near?: string;
  filter?: string;
}

interface ConsulOptions {
  host?: string;
  port?: number;
  secure?: boolean;
  defaults?: DefaultOptions;
  agent?: httpAgent | httpsAgent;
}

declare class Consul {
  constructor(options?: ConsulOptions);

  acl: Acl;
  agent: Agent;
  catalog: Catalog;
  event: Event;
  health: Health;
  kv: Kv;
  query: Query;
  session: Session;
  status: Status;
  transaction: Transaction;

  static Acl: typeof Acl;
  static Agent: typeof Agent;
  static Catalog: typeof Catalog;
  static Event: typeof Event;
  static Health: typeof Health;
  static Kv: typeof Kv;
  static Query: typeof Query;
  static Session: typeof Session;
  static Status: typeof Status;
  static Transaction: typeof Transaction;
  static Watch: typeof Watch;

  destroy(): void;

  watch(options: WatchOptions): Watch;
}

export { Consul };
